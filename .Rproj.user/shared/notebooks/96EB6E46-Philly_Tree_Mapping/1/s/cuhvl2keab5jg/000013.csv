"0","#Read planting data by census block and get total for FY23 and FY24"
"0","plantings <- read.csv('data/plantings.csv') %>% "
"0","  replace(is.na(.),0) %>% "
"0","  rename(GEOID20 = Census.Block) %>%"
"0","  mutate(Plantings_FY_2024_23 = FY23.Count + FY24.Count) %>%"
"0","  select(GEOID20,Plantings_FY_2024_23)"
"0",""
"0","#Read pruning data by census block and get total for FY23 and FY24"
"0","prunings <- read.csv('data/prunings.csv') %>% "
"0","  replace(is.na(.),0) %>% "
"0","  rename(GEOID20 = Census.Block) %>%"
"0","  mutate(Prunings_FY_2024_23 = FY23.Count + FY24.Count) %>%"
"0","  select(GEOID20,Prunings_FY_2024_23)"
"0",""
"0","#Download cenus block data using tigris and join planting and pruning data"
"0","plantings_prunings_block <- tigris::blocks(state='PA',county='Philadelphia') %>%"
"0","  left_join(.,plantings,by='GEOID20') %>%"
"0","  left_join(.,prunings,by='GEOID20') %>%"
"0","  replace(is.na(.),0) %>% "
"0","  st_transform('EPSG:2272')"
"0",""
"0","#Aggregate up to the tract level"
"0","plantings_prunings_tract <- plantings_prunings_block %>%"
"0","  st_drop_geometry() %>%"
"0","  group_by(TRACTCE20) %>% summarise(plantings = sum(Plantings_FY_2024_23),"
"0","                                    prunings = sum(Prunings_FY_2024_23)) %>%"
"0","  mutate(GEOID = paste('42101',TRACTCE20,sep="""")) %>%"
"0","  select(-TRACTCE20)"
"0",""
"0","#Join aggregated data to the census tracts boundaries"
"0","Philly_Tracts3 <- left_join(Philly_Tracts2,plantings_prunings_tract,by='GEOID')"
"0",""
"0","#Make Maps"
"0","t7 <- ggplot() +"
"0","  geom_sf(data = Philly_Tracts3, aes(fill = cut(plantings, breaks = c(-1,0,2,4,6,8,10,30))),color='white',linewidth =0.2)+"
"0","  scale_fill_manual(values = brewer.pal(n = 7, name = ""YlGn""),name='Trees Planted',labels=c('0','1-2','3-4','5-6','7-8','9-10','10+'))+"
"0","  geom_sf(data = city_concil_districts,fill='Transparent',color='grey20',linewidth=1)+"
"0","  geom_sf_text(data=city_concil_districts %>% filter(DISTRICT != 9 & DISTRICT != 2),aes(label=DISTRICT),size=7)+"
"0","  geom_sf_text(data=city_concil_districts %>% filter(DISTRICT == 9 | DISTRICT == 2),aes(label=DISTRICT),size=7,nudge_x=5000,nudge_y=-5000)+"
"0","  theme_void()+"
"0","  ggtitle('Number of Trees Planted (FY23 and FY24)')+"
"0","  theme(legend.text=element_text(size=11),legend.title=element_text(size=12),legend.position = c(0.8, 0.25))"
"0",""
"0","ggsave('outputs/plantings.png',dpi=300,width=5,height=5)"
"0",""
"0","t8 <- ggplot() +"
"0","  geom_sf(data = Philly_Tracts3, aes(fill = cut(prunings, breaks = c(-1,0,5,10,15,20,25,100))),color='white',linewidth =0.2)+"
"0","  scale_fill_manual(values = brewer.pal(n = 7, name = ""YlGn""),name='Trees Pruned',labels=c('0','1-5','6-10','11-15','16-20','21-25','25+'))+"
"0","  geom_sf(data = city_concil_districts,fill='Transparent',color='grey20',linewidth=1)+"
"0","  geom_sf_text(data=city_concil_districts %>% filter(DISTRICT != 9 & DISTRICT != 2),aes(label=DISTRICT),size=7)+"
"0","  geom_sf_text(data=city_concil_districts %>% filter(DISTRICT == 9 | DISTRICT == 2),aes(label=DISTRICT),size=7,nudge_x=5000,nudge_y=-5000)+"
"0","  theme_void()+"
"0","  ggtitle('Number of Trees Pruned (FY23 and FY24)')+"
"0","  theme(legend.text=element_text(size=11),legend.title=element_text(size=12),legend.position = c(0.8, 0.25))"
"0",""
"0","ggsave('outputs/prunings.png',dpi=300,width=5,height=5)"
"0",""
"0","grid.arrange(nrow=1,t7,t8)"
